# 汽车拍卖网站
本项目基于xampp实现，主要使用语言为php

将项目文件夹放置在htdoc文件夹内，启动服务器，将```init.sql```导入数据库后在浏览器访问以下链接即可预览

```localhost/DatabaseProject/index.php```

## 涵盖功能
1. 用户登入登出
2. 管理员账户设置，可查看当前拍卖情况以及所有用户情况
3. 用户可出价，在规定日期前均可叫价
4. 用户可查看当前最高价
5. 含有区块链模块，能防止竞价过程被篡改

## 数据库简介
包含Customer、User、Bids、autos、blockchain表

其中User表的ID外接Customer表ID
，Bid表的auto的ID与自己表内的ID连接
，CustomerID与Customer表的ID连接
，blockchain表的cus_id和auto_id与Customer表和auto表连接


# 各文件解释

## config.php
这里实现了一些初始化设置，包括数据库名称密码，以及一些函数用来检查用户登录状态

## index.php
这个文件是用户页面,也是主界面

进入后一开始会判断用户状态，若未登录则进入登入页面```login.php```。

若处于登录状态，则会进入用户页面，若是管理员则会进入管理员界面```admin_dashboard.php```

此页面展示了所有可用功能，可转到对应的界面

### 1. 查看车辆```view_vehicles.php```

该页面展示了市场上所有可拍卖的汽车

### 2. 投标管理```max_bid.php```

此处负责显示当前各个车辆的最高拍卖价，通过调用编写好的max_bid过程实现，过程在```init.sql```中创建。

### 3. 查看结果模态框```winners_losers.php```

此处负责展示用户输入特定汽车ID的叫价结果，在过了设定的日期后则会显示

### 4. 投标模态框

这里实现了叫价，在输入价格后会跳转到```process_bid.php```，判断是否符合要求并添加叫价。

### 5. 区块链浏览器

这里为我最近添加的实验性功能，主要实现页面在```blockchain_explorer.php```功能在```Blochain.php```中。

区块链本质就是多个区块连在一起，每个区块都会有自己的信息，在此处则为用户、叫价、以及叫价时间等，而且区块还会有一个最重要的部分：哈希值，每个区块有两个，分别是前一个区块的哈希值和当前区块的哈希值，还有一个被称为```$nonce``的变量

每次用户叫价都生成一个新的区块，这个新的区块的哈希值是通过前一个区块计算而来的，计算方法如下

1. 设置计算难度```$difficult```
2. 对当前区块的信息（previousHash、data(用户叫价信息)、nonce（初始为0））进行哈希值计算
3. 每次计算nonce都自增，直到新的哈希值的前```$difficult```位数字为0
4. 将当前所有的信息整理为一个区块并插入```blockchain```表中

验证方法如下：
每次进入区块链浏览器时，系统都会进行一次检查，验证通过计算（previousHash、data(用户叫价信息)、nonce（初始为0））的哈希值，若data部分被篡改过，则该哈希值计算结果会与保存的结果差别很大，从而实现了数据的防篡改。




